#!/bin/bash

notify-send -t 10000 "GDA is starting..."

. /$SOFTWAREFOLDER/$BEAMLINE/software/gda/$BEAMLINE-config/bin/gda_environment.sh

# Start log panel if not already started
LOGPANEL=$(ps -ef | grep LogPanel | grep -v grep)
if [ "X$LOGPANEL" == "X" ] ; then
	nohup GDA_StartLogPanel 2>/dev/null &
else
	wmctrl -R "GDA Log Panel"
fi

##Set default printer
lpoptions -d b.i11.cc2.col.1 -o job-sheets=none,none

if [ -n "$JAVA_OPTS" ] ; then
	export JAVA_OPTS="-Xms128m -Xmx1024m -XX:MaxPermSize=128m $JAVA_OPTS"
else
	export JAVA_OPTS="-Xms128m -Xmx1024m -XX:MaxPermSize=128m"
fi

`dirname $0`/gda_command client  $@ -x ../clients/main/live/client.xml

if [ "X$LOGPANEL" == "X" ] ; then
	sleep 5
	wmctrl -r "GDA Log Panel" -e 0,1921,0,1000,1000
fi

